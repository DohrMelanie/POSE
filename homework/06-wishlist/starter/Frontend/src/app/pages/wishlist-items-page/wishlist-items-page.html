<section class="card items">
  <h1>Wishlist items</h1>

  <!-- Conditionally show loading/error messages -->
  @if(error()) {
  <div class="message error">An error has occurred</div>
  } @if(loading()) {
  <div class="message">Loading…</div>
  }

  <!-- Conditionally show the grid once loaded; only if there are items -->
  @if (!loading() && !error()) { 
    @if(items().length === 0) {
  <div class="message">No items yet. Add one using “Add item”.</div>
  } @else {
  <div class="grid">
    <div class="head">Item</div>
    <div class="head">Category</div>
    <div class="head">Bought</div>
    <div class="head">Actions</div>

    @for(item of items(); track item.id) {
    <!-- Add a row for each item -->
    <div class="cell">
      <!-- Add "bought" class if the item is bought -->
      <span [class.bought]="item.bought">{{ item.itemName }}</span>
    </div>
    <div class="cell">Category of item</div>
    <div class="cell"> {{ item.bought ? "Yes" : "No"}}</div>
    <div class="cell actions">
      <!-- 
            Conditionally display "Mark bought" or "Unmark" 
            Disable the button while saving operations (marking as bought, deleting) are in progress
          -->
      <button type="button" class="btn" [disabled]="saving()" (click)="changeStatus(item)">
        {{item.bought ? "Unmark" : "Mark bought"}}
        <!-- or "Unmark" -->
      </button>
      <!-- Disable while saving operations are in progress -->
      <button type="button" class="btn danger" [disabled]="saving()" (click)="deleteItem(item)">Delete</button>
    </div>
    }
  </div>
  } }

  <!-- Conditionally show message if there are no items -->
</section>
